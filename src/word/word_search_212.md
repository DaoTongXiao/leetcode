**é€å±‚æ·±å…¥ã€æ°å¼€æ‰ç¢åœ°è®²è§£**è¿™ä¸ªâ€œå•è¯æœç´¢ IIâ€é—®é¢˜ï¼ˆLeetCode 212ï¼‰ï¼ŒåŒ…æ‹¬ï¼š

- ä¸ºä»€ä¹ˆæš´åŠ›ä¸è¡Œï¼Ÿ
- Trie æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆç”¨å®ƒï¼Ÿ
- DFS å›æº¯æ€ä¹ˆé…åˆ Trieï¼Ÿ
- ä»£ç æ¯ä¸€æ­¥åœ¨åšä»€ä¹ˆï¼Ÿ
- å‰ªæå’Œä¼˜åŒ–ç»†èŠ‚
- ä¸¾ä¸ªå®Œæ•´ä¾‹å­èµ°ä¸€éæµç¨‹

---

# ğŸŒŸ ä¸€ã€é—®é¢˜å†ç†è§£

ä½ æœ‰ä¸€ä¸ªäºŒç»´å­—ç¬¦ç½‘æ ¼ `board`ï¼Œæ¯”å¦‚ï¼š

```
[
  ['o','a','a','n'],
  ['e','t','a','e'],
  ['i','h','k','r'],
  ['i','f','l','v']
]
```

å’Œä¸€ä¸ªå•è¯åˆ—è¡¨ `words = ["oath","pea","eat","rain"]`

ä½ è¦æ‰¾å‡ºï¼š**å“ªäº›å•è¯å¯ä»¥é€šè¿‡åœ¨ç½‘æ ¼ä¸­â€œèµ°ç›¸é‚»æ ¼å­â€æ‹¼å‡ºæ¥ï¼Œä¸”æ¯ä¸ªæ ¼å­åªèƒ½ç”¨ä¸€æ¬¡ã€‚**

âœ… è¾“å‡ºï¼š`["eat","oath"]`

---

# ğŸš« äºŒã€ä¸ºä»€ä¹ˆä¸èƒ½æš´åŠ›ï¼Ÿâ€”â€” æ—¶é—´çˆ†ç‚¸ï¼

æš´åŠ›æ€è·¯ï¼šå¯¹æ¯ä¸ªå•è¯ï¼Œåœ¨ board ä¸Šåšä¸€æ¬¡ DFSï¼ˆåƒ Word Search Iï¼‰ã€‚

- å‡è®¾æœ‰ `W` ä¸ªå•è¯ï¼Œæ¯ä¸ªå•è¯å¹³å‡é•¿åº¦ `L`
- ç½‘æ ¼å¤§å° `M x N`
- æ¯ä¸ªèµ·ç‚¹æœ€å¤šèµ° `4^L` æ¡è·¯å¾„ï¼ˆæŒ‡æ•°çˆ†ç‚¸ï¼ï¼‰

â†’ æ€»æ—¶é—´å¤æ‚åº¦ â‰ˆ `O(W * M * N * 4^L)`

å½“ `W=1000`, `M=N=10`, `L=10` â†’ 1000 * 100 * 4^10 â‰ˆ **1000 * 100 * 1,000,000 = 1000äº¿æ¬¡æ“ä½œï¼**

ğŸ’¥ è‚¯å®šè¶…æ—¶ï¼

---

# âœ… ä¸‰ã€Trie æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿ

## ä»€ä¹ˆæ˜¯ Trieï¼ˆå­—å…¸æ ‘ / å‰ç¼€æ ‘ï¼‰ï¼Ÿ

Trie æ˜¯ä¸€ç§æ ‘å½¢ç»“æ„ï¼Œç”¨äºé«˜æ•ˆå­˜å‚¨å’ŒæŸ¥æ‰¾å­—ç¬¦ä¸²é›†åˆã€‚

æ¯”å¦‚å•è¯ï¼š`["eat", "eats", "sea", "see"]`

æ„å»º Trieï¼š

```
        root
       /    \
      e      s
     /       / \
    a       e   e
   / \     /     \
  t   t   a       e
       \
        s
```

- æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ã€‚
- ä»æ ¹åˆ°æŸä¸ªèŠ‚ç‚¹çš„è·¯å¾„æ„æˆä¸€ä¸ªå‰ç¼€ã€‚
- å¦‚æœæŸä¸ªèŠ‚ç‚¹æ ‡è®°äº†â€œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´å•è¯â€ï¼Œæ¯”å¦‚ `node.word = "eat"`ï¼Œå°±è¯´æ˜è·¯å¾„åˆ°æ­¤æ˜¯ä¸€ä¸ªæœ‰æ•ˆå•è¯ã€‚

## ä¸ºä»€ä¹ˆç”¨ Trieï¼Ÿ

1. **å…±äº«å‰ç¼€**ï¼šæ¯”å¦‚ "eat" å’Œ "eats" å…±äº« "eat"ï¼ŒDFS æ—¶èµ°ä¸€æ¬¡è·¯å¾„å°±èƒ½åŒæ—¶åŒ¹é…ä¸¤ä¸ªè¯ã€‚
2. **æå‰å‰ªæ**ï¼šå¦‚æœå½“å‰è·¯å¾„åœ¨ Trie ä¸­ä¸å­˜åœ¨ï¼ˆæ¯”å¦‚ä½ æ‹¼äº† "xyz"ï¼Œä½† Trie é‡Œæ²¡æœ‰ä»¥ "xyz" å¼€å¤´çš„è¯ï¼‰ï¼Œç›´æ¥æ”¾å¼ƒï¼Œä¸ç»§ç»­é€’å½’ã€‚
3. **æ‰¹é‡æœç´¢**ï¼šä¸€æ¬¡ DFS éå†ï¼Œå¯ä»¥åŒ¹é…å¤šä¸ªå•è¯ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä¸€ä¸ªæœã€‚

ğŸ‘‰ **Trie æŠŠâ€œå¤šä¸ªå•è¯æœç´¢â€åˆå¹¶æˆâ€œä¸€æ¬¡å‰ç¼€è·¯å¾„æ¢ç´¢â€**ï¼Œæ•ˆç‡é£è·ƒï¼

---

# ğŸŒ€ å››ã€DFS + Trie å¦‚ä½•é…åˆï¼Ÿ

æˆ‘ä»¬ä¸æ˜¯â€œå¯¹æ¯ä¸ªå•è¯æœç½‘æ ¼â€ï¼Œè€Œæ˜¯ï¼š

> **ä»ç½‘æ ¼æ¯ä¸ªä½ç½®å‡ºå‘ï¼Œæ²¿ç€ç›¸é‚»æ ¼å­èµ°ï¼ŒåŒæ—¶åœ¨ Trie é‡Œâ€œåŒæ­¥èµ°â€ï¼Œçœ‹èƒ½æ‹¼å‡ºä»€ä¹ˆå•è¯ã€‚**

## ä¸¾ä¸ªä¾‹å­ï¼š

å½“å‰åœ¨ `(0,0)`ï¼Œå­—ç¬¦æ˜¯ `'o'`ã€‚

- Trie æ ¹èŠ‚ç‚¹æœ‰æ²¡æœ‰ `'o'` å­èŠ‚ç‚¹ï¼Ÿæœ‰ â†’ å¾€ä¸‹èµ°ã€‚
- åˆ° `'o'` èŠ‚ç‚¹ï¼Œå®ƒä¸æ˜¯å®Œæ•´å•è¯ï¼ˆ`word = None`ï¼‰ã€‚
- ç»§ç»­èµ°ç›¸é‚»æ ¼å­ï¼Œæ¯”å¦‚ `(0,1)` æ˜¯ `'a'` â†’ æ‹¼æˆ `"oa"`ã€‚
- Trie ä¸­ `'o'` èŠ‚ç‚¹æœ‰æ²¡æœ‰ `'a'` å­èŠ‚ç‚¹ï¼Ÿæœ‰ â†’ ç»§ç»­ã€‚
- `(1,1)` æ˜¯ `'t'` â†’ `"oat"` â†’ Trie ä¸­æœ‰å—ï¼Ÿæœ‰ã€‚
- `(1,2)` æ˜¯ `'h'` â†’ `"oath"` â†’ Trie ä¸­è¿™ä¸ªèŠ‚ç‚¹ `word = "oath"` â†’ âœ… æ‰¾åˆ°ä¸€ä¸ªè¯ï¼

åŒæ—¶ï¼Œå¦‚æœ Trie ä¸­è¿˜æœ‰ `"oaths"`ï¼Œæˆ‘ä»¬ä¼šç»§ç»­å¾€ä¸‹æ‰¾ï¼Œ**ä¸€æ¬¡è·¯å¾„åŒ¹é…å¤šä¸ªè¯ï¼**

---

# ğŸ§© äº”ã€ä»£ç é€è¡Œè¯¦è§£ï¼ˆPythonï¼‰

æˆ‘ä»¬ç”¨æ³¨é‡Šä¸€è¡Œè¡Œè®²æ¸…æ¥šï¼š

```python
class TrieNode:
    def __init__(self):
        self.children = {}  # å­èŠ‚ç‚¹æ˜ å°„ï¼šå­—ç¬¦ -> TrieNode
        self.word = None    # å¦‚æœæ˜¯å•è¯ç»“å°¾ï¼Œå­˜å‚¨å®Œæ•´å•è¯ï¼Œå¦åˆ™ None

class Solution:
    def findWords(self, board: List[List[str]], words: List[str]) -> List[str]:
        # 1ï¸âƒ£ æ„å»º Trie
        root = TrieNode()
        for word in words:
            node = root
            for c in word:
                if c not in node.children:
                    node.children[c] = TrieNode()  # åˆ›å»ºæ–°èŠ‚ç‚¹
                node = node.children[c]           # ç§»åŠ¨åˆ°å­èŠ‚ç‚¹
            node.word = word  # æ ‡è®°ï¼šä»æ ¹åˆ°æ­¤èŠ‚ç‚¹æ„æˆ word

        m, n = len(board), len(board[0])
        res = set()  # ç”¨ set é¿å…é‡å¤æ·»åŠ åŒä¸€ä¸ªå•è¯

        # 2ï¸âƒ£ DFS å›æº¯å‡½æ•°
        def dfs(i, j, node):
            # è¶Šç•Œ æˆ– å·²è®¿é—®è¿‡ï¼ˆç”¨ '#' æ ‡è®°ï¼‰
            if i < 0 or i >= m or j < 0 or j >= n or board[i][j] == '#':
                return

            c = board[i][j]  # å½“å‰å­—ç¬¦

            # Trie ä¸­æ²¡æœ‰ä»¥å½“å‰å­—ç¬¦å¼€å¤´çš„è·¯å¾„ â†’ å‰ªæï¼
            if c not in node.children:
                return

            # åŒæ­¥ç§»åŠ¨åˆ° Trie çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            node = node.children[c]

            # âœ… å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå®Œæ•´å•è¯ï¼ŒåŠ å…¥ç»“æœ
            if node.word:
                res.add(node.word)
                # æ³¨æ„ï¼šä¸è¦ returnï¼å› ä¸ºå¯èƒ½æœ‰æ›´é•¿çš„å•è¯ï¼Œæ¯”å¦‚ "eat" å’Œ "eats"

            # 3ï¸âƒ£ å›æº¯æ ‡è®°ï¼šé˜²æ­¢é‡å¤ä½¿ç”¨å½“å‰æ ¼å­
            temp = board[i][j]
            board[i][j] = '#'

            # 4ï¸âƒ£ é€’å½’å››ä¸ªæ–¹å‘
            dfs(i+1, j, node)
            dfs(i-1, j, node)
            dfs(i, j+1, node)
            dfs(i, j-1, node)

            # 5ï¸âƒ£ å›æº¯æ¢å¤
            board[i][j] = temp

        # 6ï¸âƒ£ ä»æ¯ä¸ªæ ¼å­ä½œä¸ºèµ·ç‚¹å¼€å§‹æœç´¢
        for i in range(m):
            for j in range(n):
                dfs(i, j, root)

        return list(res)
```

---

# ğŸ§¹ å…­ã€å…³é”®ç»†èŠ‚ & ä¼˜åŒ–

## 1. ä¸ºä»€ä¹ˆç”¨ `set()` å­˜ç»“æœï¼Ÿ

åŒä¸€ä¸ªå•è¯å¯èƒ½ä»ä¸åŒè·¯å¾„è¢«æ‰¾åˆ°å¤šæ¬¡ï¼ˆæ¯”å¦‚ "a" åœ¨å¤šä¸ªä½ç½®ï¼‰ï¼Œç”¨ `set` è‡ªåŠ¨å»é‡ã€‚

## 2. ä¸ºä»€ä¹ˆæ‰¾åˆ°å•è¯åä¸ `return`ï¼Ÿ

å› ä¸ºå¯èƒ½æœ‰æ›´é•¿çš„å•è¯å…±äº«å‰ç¼€ï¼

æ¯”å¦‚ Trie é‡Œæœ‰ `"eat"` å’Œ `"eats"`ï¼š

- ä½ èµ°åˆ° `"eat"` æ—¶ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªè¯ï¼Œä½†ä½ è¿˜å¾—ç»§ç»­èµ°ï¼Œçœ‹èƒ½ä¸èƒ½æ‹¼å‡º `"eats"`ã€‚

## 3. å›æº¯æ ‡è®°ä¸ºä»€ä¹ˆç”¨ `'#'`ï¼Ÿ

- ç®€å•é«˜æ•ˆï¼Œç›´æ¥ä¿®æ”¹åŸæ•°ç»„ã€‚
- é€’å½’è¿”å›æ—¶æ¢å¤åŸå€¼ï¼Œä¸å½±å“å…¶ä»–è·¯å¾„ã€‚

âš ï¸ æ³¨æ„ï¼šå¦‚æœé¢˜ç›®ä¸å…è®¸ä¿®æ”¹åŸæ•°ç»„ï¼Œå¯ä»¥ç”¨ `visited` äºŒç»´å¸ƒå°”æ•°ç»„ä»£æ›¿ã€‚

## 4. ã€è¿›é˜¶ã€‘Trie å‰ªæä¼˜åŒ–ï¼ˆå¯é€‰ï¼‰

å½“ä½ æ‰¾åˆ°ä¸€ä¸ªå•è¯åï¼Œå¯ä»¥â€œå‰ªæ‰â€è¿™ä¸ªåˆ†æ”¯ï¼ˆå¦‚æœå®ƒæ²¡æœ‰å­èŠ‚ç‚¹ï¼‰ï¼Œé¿å…åç»­æ— ç”¨æœç´¢ã€‚

```python
# åœ¨æ‰¾åˆ° word åï¼š
if node.word:
    res.add(node.word)
    node.word = None  # é¿å…é‡å¤æ·»åŠ 
    # å¯é€‰ï¼šå¦‚æœè¯¥èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå¯ä»¥é€šçŸ¥çˆ¶èŠ‚ç‚¹åˆ é™¤å®ƒï¼ˆéœ€è¦åå‘æŒ‡é’ˆæˆ–é€’å½’æ¸…ç†ï¼‰
```

æ›´é«˜çº§çš„â€œåŠ¨æ€åˆ é™¤â€éœ€è¦ç»´æŠ¤çˆ¶èŠ‚ç‚¹å¼•ç”¨ï¼Œé¢è¯•ä¸­ä¸å¼ºåˆ¶è¦æ±‚ã€‚

---

# ğŸ¯ ä¸ƒã€å®Œæ•´ä¾‹å­èµ°ä¸€é

å‡è®¾ï¼š

```python
board = [
  ['o','a','a','n'],
  ['e','t','a','e'],
  ['i','h','k','r'],
  ['i','f','l','v']
]
words = ["oath","pea","eat","rain"]
```

### æ­¥éª¤ 1ï¼šæ„å»º Trie

æ’å…¥æ‰€æœ‰å•è¯ï¼š

```
root
â”œâ”€â”€ o â†’ a â†’ t â†’ h (word="oath")
â”œâ”€â”€ p â†’ e â†’ a (word="pea")
â”œâ”€â”€ e â†’ a â†’ t (word="eat")
â””â”€â”€ r â†’ a â†’ i â†’ n (word="rain")
```

### æ­¥éª¤ 2ï¼šä» (0,0) å¼€å§‹ï¼Œå­—ç¬¦ 'o'

- Trie æœ‰ 'o' â†’ è¿›å…¥ o èŠ‚ç‚¹
- å¾€å³åˆ° (0,1) 'a' â†’ "oa" â†’ Trie æœ‰
- å¾€ä¸‹åˆ° (1,1) 't' â†’ "oat" â†’ Trie æœ‰
- å¾€å³åˆ° (1,2) 'a'ï¼Ÿä¸è¡Œï¼Œè¦æ‰¾ 'h'
- å¾€ä¸‹åˆ° (2,1) 'h' â†’ "oath" â†’ âœ… æ‰¾åˆ°ï¼åŠ å…¥ res

### ä» (1,0) å¼€å§‹ï¼Œå­—ç¬¦ 'e'

- Trie æœ‰ 'e' â†’ è¿›å…¥
- å¾€å³ (1,1) 't' â†’ "et" â†’ Trie æ—  â†’ å‰ªæ
- å¾€ä¸Š (0,0) 'o' â†’ "eo" â†’ æ— 
- å¾€å³å†è¯• (1,1) å·²è¯•
- å¾€ä¸‹ (2,0) 'i' â†’ "ei" â†’ æ— 
- å¾€å·¦è¶Šç•Œ
- â†’ æ¢æ–¹å‘ï¼šä» (1,0) å¾€å³åˆ° (1,1) ä¸è¡Œï¼Œè¯•è¯• (1,0) â†’ (0,0) ä¸è¡Œï¼Œè¯•è¯• (1,0) â†’ (1,1) ä¸è¡Œ...

ç­‰ä¸€ä¸‹ï¼æˆ‘ä»¬æ¼äº†ï¼š

ä» (1,0)='e' â†’ å¾€å³ä¸Šï¼Ÿä¸è¡Œã€‚è¯•è¯•ï¼š

(1,0) â†’ (0,0)='o' âŒ  
(1,0) â†’ (2,0)='i' âŒ  
(1,0) â†’ (1,1)='t' âŒ  
(1,0) â†’ (1,-1) è¶Šç•Œ

â†’ ä¼¼ä¹æ‰¾ä¸åˆ° "eat"ï¼Ÿ

åˆ«æ€¥ï¼æˆ‘ä»¬æ¢ä¸ªèµ·ç‚¹ï¼š

ä» (1,0)='e' â†’ å¾€å³ (1,1)='t' ä¸è¡Œï¼Œä½†ï¼š

ä» (1,2)='a' å¼€å§‹ï¼Ÿä¸ï¼Œæˆ‘ä»¬æ˜¯ä»æ¯ä¸ªæ ¼å­ä½œä¸º**èµ·ç‚¹**ã€‚

è¯•è¯•ä» (1,0) å‡ºå‘ï¼š

- 'e' â†’ Trie æœ‰
- å¾€å³ (1,1)='t' â†’ "et" âŒ
- å¾€ä¸Š (0,0)='o' â†’ "eo" âŒ
- å¾€ä¸‹ (2,0)='i' â†’ "ei" âŒ
- å¾€å·¦ âŒ

â†’ æ¢èµ·ç‚¹ï¼šä» (0,1)='a'ï¼Ÿä¸è¡Œï¼ŒTrie æ ¹èŠ‚ç‚¹æ²¡æœ‰ 'a'ï¼ˆé™¤éæœ‰ä»¥ 'a' å¼€å¤´çš„è¯ï¼‰

â†’ ä» (1,0) ä¸è¡Œï¼Œè¯•è¯• (0,3)='n'ï¼Ÿä¸è¡Œ

â†’ è¯•è¯• (1,3)='e'ï¼ŸTrie æ ¹èŠ‚ç‚¹æœ‰ 'e'ï¼

ä» (1,3)='e' å¼€å§‹ï¼š

- å¾€å·¦ (1,2)='a' â†’ "ea" âœ…
- å¾€ä¸Š (0,2)='a' â†’ "eaa" âŒ
- å¾€å·¦ (1,1)='t' â†’ "eat" âœ… â†’ æ‰¾åˆ°ï¼

æ‰€ä»¥è·¯å¾„æ˜¯ï¼š(1,3) â†’ (1,2) â†’ (1,1) = "e" â†’ "a" â†’ "t" = "eat"

âœ… æ‰€ä»¥æœ€ç»ˆæ‰¾åˆ° `"oath"` å’Œ `"eat"`

---

# ğŸ“Š å…«ã€å¤æ‚åº¦å†åˆ†æ

- **æ„å»º Trie**ï¼š`O(Î£|words[i]|)` â€” æ‰€æœ‰å•è¯æ€»é•¿åº¦
- **DFS æœç´¢**ï¼šæœ€å `O(M * N * 4^L)`ï¼Œä½† Trie å‰ªæè®©å®é™…è¿œå°äºæ­¤
- **ç©ºé—´**ï¼šTrie ç©ºé—´ `O(Î£|words[i]|)`ï¼Œé€’å½’æ ˆ `O(L)`

---

# âœ… ä¹ã€æ€»ç»“ï¼šè§£é¢˜å¿ƒæ³•å£è¯€

> **â€œTrie å­˜è¯ï¼ŒDFS åŒæ­¥èµ°ï¼›å‰ç¼€å‰ªæï¼Œå›æº¯é˜²é‡ç”¨ï¼›æ‰¾åˆ°å°±æ”¶ï¼Œåˆ«æ€¥ç€å›å¤´ï¼ˆå¯èƒ½è¿˜æœ‰æ›´é•¿è¯ï¼‰ï¼â€**

---

